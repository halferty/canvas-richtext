<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Quick Test</title>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        #editor { border: 2px solid #333; cursor: text; display: block; margin: 20px 0; }
        #editor:focus { outline: none; border-color: #4CAF50; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        #output { background: #f5f5f5; padding: 15px; margin-top: 20px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Canvas RichText Test</h1>
    
    <canvas id="editor" width="800" height="400"></canvas>
    
    <button onclick="testGetText()">Get Text</button>
    <button onclick="testSetText()">Set Text</button>
    <button onclick="testClear()">Clear</button>
    <button onclick="testFontSize()">Change Font Size</button>
    <button onclick="testFontFamily()">Change Font Family</button>
    <button onclick="testDumpState()" style="background: #ff9800; color: white;">üêõ Dump State</button>
    
    <div id="output"></div>

    <script type="module">
        import { CanvasEditor } from './dist/canvas-editor.esm.js';

        const canvas = document.getElementById('editor');
        window.editor = new CanvasEditor(canvas, {
            backgroundColor: '#ffffff',
            padding: 15,
            defaultFontSize: 18
        });

        editor.setText('Type here to test the editor!\nTry arrow keys, backspace, enter...');
        canvas.focus();

        window.testGetText = () => {
            const text = editor.getText();
            document.getElementById('output').innerHTML = 
                `<strong>Current Text:</strong><br><pre>${text}</pre>`;
        };

        window.testSetText = () => {
            editor.setText('Lorem ipsum dolor sit amet.\n\nThis is a new line.');
            canvas.focus();
        };

        window.testClear = () => {
            editor.clear();
            canvas.focus();
        };

        let size = 18;
        window.testFontSize = () => {
            size = size === 18 ? 32 : 18;
            editor.setFontSize(size);
            canvas.focus();
        };

        let family = 'Arial';
        window.testFontFamily = () => {
            family = family === 'Arial' ? 'Courier New' : 'Arial';
            editor.setFontFamily(family);
            canvas.focus();
        };

        window.testDumpState = () => {
            const state = editor.dumpState();
            console.log('=== EDITOR STATE DUMP ===');
            console.log(JSON.stringify(state, null, 2));
            document.getElementById('output').innerHTML = 
                `<strong>State dumped to console!</strong><br><pre>${JSON.stringify(state, null, 2)}</pre>`;
        };

        console.log('Editor initialized:', editor);
        console.log('Debug: Use window.editor.dumpState() or testDumpState() button');
    </script>
</body>
</html>
